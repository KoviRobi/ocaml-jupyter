<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Bench (jupyter.Jupyter_notebook.Bench)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">jupyter</a> &#x00BB; <a href="../index.html">Jupyter_notebook</a> &#x00BB; Bench</nav><header class="odoc-preamble"><h1>Module <code><span>Jupyter_notebook.Bench</span></code></h1><p>Benchmark functions</p></header><nav class="odoc-toc"><ul><li><a href="#types">Types</a></li><li><a href="#benchmark">Benchmark</a></li><li><a href="#pretty-printers">Pretty printers</a></li></ul></nav><div class="odoc-content"><h3 id="types"><a href="#types" class="anchor"></a>Types</h3><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span><span> = </span><span>{</span></code><ol><li id="type-t.b_rtime" class="def record field anchored"><a href="#type-t.b_rtime" class="anchor"></a><code><span>b_rtime : <span class="type-var">'a</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Real time for the process</p><span class="comment-delim">*)</span></div></li><li id="type-t.b_utime" class="def record field anchored"><a href="#type-t.b_utime" class="anchor"></a><code><span>b_utime : <span class="type-var">'a</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>User time for the process</p><span class="comment-delim">*)</span></div></li><li id="type-t.b_stime" class="def record field anchored"><a href="#type-t.b_stime" class="anchor"></a><code><span>b_stime : <span class="type-var">'a</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>System time for the process</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>The type of execution time of functions or code snippets.</p><p><code>'a</code> is <code>float</code> or <code>stat</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.8.0</li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-stat"><a href="#type-stat" class="anchor"></a><code><span><span class="keyword">type</span> stat</span><span> = </span><span>{</span></code><ol><li id="type-stat.bs_mean" class="def record field anchored"><a href="#type-stat.bs_mean" class="anchor"></a><code><span>bs_mean : float;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Mean of execution time per a loop</p><span class="comment-delim">*)</span></div></li><li id="type-stat.bs_std" class="def record field anchored"><a href="#type-stat.bs_std" class="anchor"></a><code><span>bs_std : float;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Standard deviation of execution time per a loop</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>The type of summary results of repeated measurement of execution time.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.8.0</li></ul></div></div><h3 id="benchmark"><a href="#benchmark" class="anchor"></a>Benchmark</h3><div class="odoc-spec"><div class="spec value anchored" id="val-time"><a href="#val-time" class="anchor"></a><code><span><span class="keyword">val</span> time : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> * <span>float <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>time f</code> measures execution time of a function <code>f</code>.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>a pair of <code>f ()</code> and a result of benchmark.</p></li></ul><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.8.0</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-timeit"><a href="#val-timeit" class="anchor"></a><code><span><span class="keyword">val</span> timeit : 
  <span>?runs:int <span class="arrow">&#45;&gt;</span></span>
  <span>?loops_per_run:int <span class="arrow">&#45;&gt;</span></span>
  <span>?before_run:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?after_run:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-stat">stat</a> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>timeit ?runs ?loops_per_run ?before_run ?after_run f</code> repeatedly executes a function <code>f</code>, and measures the mean and the standard deviation of each execution time of <code>f ()</code>.</p><pre class="language-ocaml"><code>for i = 1 to runs do
  before_run () ;
  (* --- start measurement of execution time of each run --- *)
  for _ = 1 to loops_per_run do
    ignore (f ()) ;
  done ;
  (* --- finish measurement --- *)
  after_run () ;
done</code></pre><p><code>timeit</code> is inspired by <a href="https://docs.python.org/3/library/timeit.html">timeit</a> package in Python. The parameter <code>loops_per_run</code>, <code>before_run</code> are named as <code>number</code>, <code>setup</code> respectively in Python.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">runs</span> <p>the number of running (default = 5)</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">loops_per_run</span> <p>the number of loops per each run (default = 1,000,000)</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">before_run</span> <p>function once called before each run.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">after_run</span> <p>function once called after each run.</p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>summary of measurement.</p></li></ul><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.8.0</li></ul></div></div><h3 id="pretty-printers"><a href="#pretty-printers" class="anchor"></a>Pretty printers</h3><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : 
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.8.0</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_float_t"><a href="#val-pp_float_t" class="anchor"></a><code><span><span class="keyword">val</span> pp_float_t : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span>float <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.8.0</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_timedelta"><a href="#val-pp_timedelta" class="anchor"></a><code><span><span class="keyword">val</span> pp_timedelta : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.8.0</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_stat"><a href="#val-pp_stat" class="anchor"></a><code><span><span class="keyword">val</span> pp_stat : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-stat">stat</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.8.0</li></ul></div></div></div></body></html>